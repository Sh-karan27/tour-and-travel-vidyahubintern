import { useEffect, useState } from "react";
import logo from "../assets/images/logo.png";
import { navLinks } from "../data";
import { NavLink } from "react-router";

const Navbar = () => {
  const [isScrolled, setIsScrolled] = useState(false);

  useEffect(() => {
    const handleScroll = () => {
      console.log(window.scrollY);
      setIsScrolled(window.scrollY > 20);
    };

    window.addEventListener("scroll", handleScroll);

    // Cleanup the event listener on unmount
    return () => {
      window.removeEventListener("scroll", handleScroll);
    };
  }, []);

  /* TODO: use twMerge and clsx to combine class*/
  return (
    <nav
      className={`w-full p-4 flex items-center justify-evenly fixed top-0 ${isScrolled ? "bg-white shadow-md" : "bg-transparent"}`}
    >
      <div className="flex items-center justify-center gap-1 text-red-500">
        <img src={logo} alt="logo" className="w-10 h-10" />
        <span className="text-xl font-bold">Travel</span>
      </div>

      <div className="w-1/2 flex items-center justify-evenly">
        {navLinks.map((curr, i) => (
          <div className="relative group" key={i}>
            <NavLink
              to={curr.link}
              className="relative font-semibold text-text-normal hover:text-red-500 group"
            >
              {curr.title}
              <span className="absolute left-0 bottom-0 h-[2px] w-0 bg-red-500 transition-all duration-500 group-hover:w-full"></span>
            </NavLink>
            <div className="min-w-[15rem] absolute bg-white group-hover:block hidden border-t-4 border-t-red-500 top-[calc(100%+1rem)]">
              {curr.children.map((child, i) => (
                <NavLink
                  to={child.link}
                  className="block p-4 hover:bg-red-500 hover:text-white"
                  key={i}
                >
                  {child.title}
                </NavLink>
              ))}
            </div>
          </div>
        ))}
      </div>

      <div className="flex items-center justify-center gap-2">
        <button className="border rounded-md p-2 text-red-500">IND|ENG</button>
        <button className="border rounded-md p-2 text-red-500">INR</button>
      </div>
    </nav>
  );
};

export default Navbar;
